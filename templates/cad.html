<!-- <button style="width:100%; height:30px" id="resetButton">reset view!111111!!!11!!! omg click it1111!111</button> -->
<canvas id="c"></canvas>
<script type="importmap">
{
  "imports": {
    "three": "https://threejs.org/build/three.module.js",
    "three/addons/": "https://threejs.org/examples/jsm/"
  }
}
</script>
<style>
	html,
	body {
		margin: 0;
		height: 100%;
	}

	#c {
		width: 100%;
		height: 100%;
		display: block;
	}
</style>

<script type="module">
	import * as THREE from 'three';
	import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
	import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
	const canvas = document.querySelector('#c');
	const renderer = new THREE.WebGLRenderer({ antialias: true, canvas });

	const fov = 45;
	const aspect = 2; // the canvas default
	const near = 0.1;
	const far = 100;
	var camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
	camera.position.set(0, 10, 20);


	const controls = new OrbitControls(camera, canvas);
	// controls.enablePan = false; //paning is bad and dissallowed
	controls.target.set(0, 0, 0);
	controls.update();

	const scene = new THREE.Scene();
	scene.background = new THREE.Color('white');

	{

		const color = 0xFFFFFF;
		const intensity = 20;
		const light = new THREE.DirectionalLight(color, intensity);
		light.position.set(0, 10, 0);
		light.target.position.set(0 , -3, -3);
		scene.add(light);
		scene.add(light.target);

	}

	{

		const color = 0xFFFFFF;
		const intensity = 2;
		const light = new THREE.DirectionalLight(color, intensity);
		light.position.set(10, 0, 0);
		light.target.position.set(0, -3, -3);
		scene.add(light);
		scene.add(light.target);

	}
	{

		const color = 0xFFFFFF;
		const intensity = 2;
		const light = new THREE.DirectionalLight(color, intensity);
		light.position.set(-10, 0, 0);
		light.target.position.set(0, -3, 0);
		scene.add(light);
		scene.add(light.target);

	}
	{

		const color = 0xFFFFFF;
		const intensity = 2;
		const light = new THREE.DirectionalLight(color, intensity);
		light.position.set(0, 10, 0);
		light.target.position.set(0, -3, 0);
		scene.add(light);
		scene.add(light.target);

	}
	{

		const color = 0xFFFFFF;
		const intensity = 2;
		const light = new THREE.DirectionalLight(color, intensity);
		light.position.set(0, -10, 0);
		light.target.position.set(0, -3, 0);
		scene.add(light);
		scene.add(light.target);

	}
	{

		const color = 0xFFFFFF;
		const intensity = 2;
		const light = new THREE.DirectionalLight(color, intensity);
		light.position.set(0, 0, -10);
		light.target.position.set(0, -3, 0);
		scene.add(light);
		scene.add(light.target);

	}
	{

		const color = 0xFFFFFF;
		const intensity = 2;
		const light = new THREE.DirectionalLight(color, intensity);
		light.position.set(0, 0, 10);
		light.target.position.set(0, -3, 0);
		scene.add(light);
		scene.add(light.target);

	}


	{

		const loader = new GLTFLoader();
		loader.load('./FriedEgg.glb', function (gltf) {
			scene.scale.set(10, 10, 10)
			scene.position.set(0, -3, -3)
			scene.add(gltf.scene);
		}, undefined, function (error) {
			console.error(error);
		});

	}
	function resetView() {
	// Set the camera position to focus on a specific part of the CAD
    camera.position.set(0, 10, 20); // Adjust the position as needed

    // Set the camera's target to look at the specific part of the CAD
    controls.target.set(0, 0, 0); // Adjust the target position as needed

    // Optionally, you can also adjust other camera properties like fov, aspect, near, and far
    camera.fov = 45; // Adjust the field of view as needed
    camera.aspect = canvas.clientWidth / canvas.clientHeight; // Adjust aspect ratio if needed
    camera.near = 0.1; // Adjust near clipping plane if needed
    camera.far = 100; // Adjust far clipping plane if needed

    // Update the camera and controls
    camera.updateProjectionMatrix();
    controls.update();
}
	function resizeRendererToDisplaySize(renderer) {

		const canvas = renderer.domElement;
		const width = canvas.clientWidth;
		const height = canvas.clientHeight;
		const needResize = canvas.width !== width || canvas.height !== height;
		if (needResize) {

			renderer.setSize(width, height, false);

		}

		return needResize;

	}

	function render() {

		if (resizeRendererToDisplaySize(renderer)) {

			const canvas = renderer.domElement;
			camera.aspect = canvas.clientWidth / canvas.clientHeight;
			camera.updateProjectionMatrix();

		}

		renderer.render(scene, camera);

		requestAnimationFrame(render);

	}

	requestAnimationFrame(render);

	
	document.getElementById("resetButton").addEventListener("click", resetView);
</script>